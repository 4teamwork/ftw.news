<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="ftw.news">

    <metal:block metal:fill-slot="head_slot">
        <link rel="alternate" type="application/rss+xml" title="RSS"
              i18n:attributes="title"
              tal:attributes="href string:${context/absolute_url}/news_listing_rss"
            />
    </metal:block>

    <metal:title fill-slot="content-title">
        <h1 class="documentFirstHeading" tal:content="view/title"></h1>
    </metal:title>

    <metal:description fill-slot="content-description">
        <metal:comment tal:content="nothing">
            No description
        </metal:comment>
    </metal:description>

    <metal:main fill-slot="content-core" tal:define="batch view/batch">

        <p tal:condition="not:batch"
           i18n:translate="news_listing_no_content_text">No content available</p>


        <ul class="news-listing news-row">
            <tal:batch repeat="lazy_item batch">
                <li tal:define="item python:view.get_item_dict(lazy_item)">
                    <a class="news-item" tal:attributes="href item/url">

                      <div tal:attributes="class python:'image' if item['image_tag'] else 'no-image image'">
                        <img tal:condition="item/image_tag" tal:replace="structure item/image_tag" />
                      </div>

                      <div class="body show-image">
                          <span class="byline">
                              <span class="dtstart" tal:content="item/news_date" />
                              <tal:author condition="item/author">
                                  <span class="author"
                                        i18n:translate="news_listing_author_label">
                                      by
                                      <span tal:content="item/author" i18n:name="author" />
                                  </span>
                              </tal:author>
                          </span>
                          <h3 class="title" tal:content="item/title" />
                          <span class="description" tal:content="item/description" tal:condition="item/description"/>
                      </div>
                    </a>
                </li>
            </tal:batch>
        </ul>

        <div metal:use-macro="context/batch_macros/macros/navigation" />

    </metal:main>
</html>

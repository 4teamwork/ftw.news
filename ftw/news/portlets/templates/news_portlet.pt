<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:omit-tag="python: 1"
      i18n:domain="ftw.news">

    <dl class="portlet newsTemplate"
        tal:define="items view/get_items;">

        <dt class="portletHeader">
            <tal:title replace="view/data/news_listing_config_title" />
        </dt>

        <dd>
            <ul>
                <li class="portletItem noRecentNews"
                    tal:condition="not: items"
                    i18n:translate="no_recent_news_label">No recent news available.</li>

                <tal:loop tal:repeat="item items">
                    <li class="portletItem"
                        tal:define="oddrow repeat/item/odd;
                                    lastrow repeat/item/end"
                        tal:attributes="class python:'%s%s' % (
                                        lastrow and 'lastItem ' or '',
                                        oddrow and 'portletItem even' or 'portletItem odd')">

                        <div class="newsText">
                            <a class="portletItemTitle"
                                 tal:content="item/title"
                                 tal:attributes="href item/url"/>

                            <div class="portletItemDate"
                                 tal:content="item/news_date" />

                            <div tal:condition="item/image_tag"
                                 tal:content="structure item/image_tag"
                                 class="image">
                            </div>

                            <div class="portletItemDescription"
                                 tal:condition="item/description">
                                <div tal:content="item/description" />
                            </div>
                        </div>

                        <div class="visualClear"><!-- --></div>
                    </li>
                </tal:loop>

                <tal:portlet_footer
                    tal:define="more_news_url view/more_news_url;
                                show_rss_link view/show_rss_link">
                    <li class="portletFooter"
                        tal:condition="python: more_news_url or show_rss_link">

                        <a class="newsMoreLink"
                           title="More News"
                           tal:condition="more_news_url"
                           i18n:attributes="title more_news_link_label"
                           tal:attributes="href more_news_url"
                           i18n:translate="more_news_link_label">More News</a>

                        <a class="RssLink"
                           title="Subscribe to the RSS feed"
                           tal:condition="show_rss_link"
                           i18n:attributes="title rss_link_title"
                           tal:attributes="href string:${context/@@plone_context_state/canonical_object_url}/news_listing_rss"
                           i18n:translate="rss_link_title">Subscribe to the RSS feed</a>
                    </li>
                </tal:portlet_footer>
            </ul>
        </dd>
    </dl>
</html>
